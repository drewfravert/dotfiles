#!/usr/bin/env bash

# ========================================================================================
# Homebrew Install
# ========================================================================================

echo "Installing Homebrew..."
[[ $(which brew) ]] || /usr/bin/env bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"

# ========================================================================================
# Options
# ========================================================================================

echo "Disabling analytics..."
brew analytics off

# ========================================================================================
# Taps
# ========================================================================================

echo "Installing taps..."
brew tap homebrew/cask-versions
brew tap homebrew/cask-drivers
brew tap homebrew/cask-fonts
brew services

# ========================================================================================
# Formulae
# ========================================================================================

echo "Installing formulae..."
[[ $(brew list --versions asdf) ]]                           || brew install asdf
[[ $(brew list --versions awscli) ]]                         || brew install awscli
[[ $(brew list --versions bash) ]]                           || brew install bash
[[ $(brew list --versions bash-completion@2) ]]              || brew install bash-completion@2
[[ $(brew list --versions coreutils) ]]                      || brew install coreutils
[[ $(brew list --versions docker) ]]                         || brew install docker
[[ $(brew list --versions exa) ]]                            || brew install exa
[[ $(brew list --versions findutils) ]]                      || brew install findutils
[[ $(brew list --versions fzf) ]]                            || brew install fzf
[[ $(brew list --versions gh) ]]                             || brew install gh
[[ $(brew list --versions git) ]]                            || brew install git
[[ $(brew list --versions gnupg) ]]                          || brew install gnupg
[[ $(brew list --versions grep) ]]                           || brew install grep
[[ $(brew list --versions httpie) ]]                         || brew install httpie
[[ $(brew list --versions imagemagick) ]]                    || brew install imagemagick
[[ $(brew list --versions mas) ]]                            || brew install mas
[[ $(brew list --versions node) ]]                           || brew install node
[[ $(brew list --versions openssh) ]]                        || brew install openssh
[[ $(brew list --versions postgresql) ]]                     || brew install postgresql
[[ $(brew list --versions ripgrep) ]]                        || brew install ripgrep
[[ $(brew list --versions thefuck) ]]                        || brew install thefuck
[[ $(brew list --versions vim) ]]                            || brew install vim
[[ $(brew list --versions wget) ]]                           || brew install wget
[[ $(brew list --versions yarn) ]]                           || brew install yarn

# ========================================================================================
# Casks
# ========================================================================================

echo "Installing applications..."
[[ $(brew cask list --versions 1password) ]]                 || brew cask install 1password
[[ $(brew cask list --versions 1password-cli) ]]             || brew cask install 1password-cli
[[ $(brew cask list --versions adobe-acrobat-reader) ]]      || brew cask install adobe-acrobat-reader
[[ $(brew cask list --versions brave-browser) ]]             || brew cask install brave-browser
[[ $(brew cask list --versions cleanmymac) ]]                || brew cask install cleanmymac
[[ $(brew cask list --versions coda) ]]                      || brew cask install coda
[[ $(brew cask list --versions codekit) ]]                   || brew cask install codekit
[[ $(brew cask list --versions docker) ]]                    || brew cask install docker
[[ $(brew cask list --versions firefox) ]]                   || brew cask install firefox
[[ $(brew cask list --versions github) ]]                    || brew cask install github
[[ $(brew cask list --versions gpg-suite) ]]                 || brew cask install gpg-suite
[[ $(brew cask list --versions graphiql) ]]                  || brew cask install graphiql
[[ $(brew cask list --versions hyper) ]]                     || brew cask install hyper
[[ $(brew cask list --versions imageoptim) ]]                || brew cask install imageoptim
[[ $(brew cask list --versions iterm2) ]]                    || brew cask install iterm2
[[ $(brew cask list --versions ivpn) ]]                      || brew cask install ivpn
[[ $(brew cask list --versions keybase) ]]                   || brew cask install keybase
[[ $(brew cask list --versions ledger-live) ]]               || brew cask install ledger-live
[[ $(brew cask list --versions little-snitch) ]]             || brew cask install little-snitch
[[ $(brew cask list --versions mamp) ]]                      || brew cask install mamp
[[ $(brew cask list --versions pgadmin4) ]]                  || brew cask install pgadmin4
[[ $(brew cask list --versions postgres) ]]                  || brew cask install postgres
[[ $(brew cask list --versions postman) ]]                   || brew cask install postman
[[ $(brew cask list --versions resilio-sync) ]]              || brew cask install resilio-sync
[[ $(brew cask list --versions slack) ]]                     || brew cask install slack
[[ $(brew cask list --versions spotify) ]]                   || brew cask install spotify
[[ $(brew cask list --versions the-unarchiver) ]]            || brew cask install the-unarchiver
[[ $(brew cask list --versions tor-browser) ]]               || brew cask install tor-browser
[[ $(brew cask list --versions transmission) ]]              || brew cask install transmission
[[ $(brew cask list --versions visual-studio-code) ]]        || brew cask install visual-studio-code
[[ $(brew cask list --versions vlc) ]]                       || brew cask install vlc

# ========================================================================================
# Versions
# ========================================================================================

echo "Installing development browsers..."
[[ $(brew cask list --versions firefox-developer-edition) ]] || brew cask install firefox-developer-edition
[[ $(brew cask list --versions google-chrome-dev) ]]         || brew cask install google-chrome-dev

# ========================================================================================
# Drivers
# ========================================================================================

echo "Installing drivers..."
[[ $(brew cask list --versions ubiquiti-unifi-controller) ]] || brew cask install ubiquiti-unifi-controller
[[ $(brew cask list --versions wacom-tablet) ]]              || brew cask install wacom-tablet

# ========================================================================================
# Fonts
# ========================================================================================

echo "Installing serif fonts..."
[[ $(brew cask list --versions font-roboto-slab) ]]          || brew cask install font-roboto-slab
[[ $(brew cask list --versions font-source-serif-pro) ]]     || brew cask install font-source-serif-pro

echo "Installing sans serif fonts..."
[[ $(brew cask list --versions font-hind) ]]                 || brew cask install font-hind
[[ $(brew cask list --versions font-inter) ]]                || brew cask install font-inter
[[ $(brew cask list --versions font-lato) ]]                 || brew cask install font-lato
[[ $(brew cask list --versions font-open-sans) ]]            || brew cask install font-open-sans
[[ $(brew cask list --versions font-open-sans-condensed) ]]  || brew cask install font-open-sans-condensed
[[ $(brew cask list --versions font-roboto) ]]               || brew cask install font-roboto
[[ $(brew cask list --versions font-roboto-condensed) ]]     || brew cask install font-roboto-condensed
[[ $(brew cask list --versions font-source-sans-pro) ]]      || brew cask install font-source-sans-pro
[[ $(brew cask list --versions font-ubuntu) ]]               || brew cask install font-ubuntu
[[ $(brew cask list --versions font-ubuntu-condensed) ]]     || brew cask install font-ubuntu-condensed

echo "Installing monospace fonts..."
[[ $(brew cask list --versions font-cascadia-mono) ]]        || brew cask install font-cascadia-mono
[[ $(brew cask list --versions font-hack) ]]                 || brew cask install font-hack
[[ $(brew cask list --versions font-inconsolata) ]]          || brew cask install font-inconsolata
[[ $(brew cask list --versions font-input) ]]                || brew cask install font-input
[[ $(brew cask list --versions font-fira-code) ]]            || brew cask install font-fira-code
[[ $(brew cask list --versions font-jetbrains-mono) ]]       || brew cask install font-jetbrains-mono
[[ $(brew cask list --versions font-roboto-mono) ]]          || brew cask install font-roboto-mono
[[ $(brew cask list --versions font-ubuntu-mono) ]]          || brew cask install font-ubuntu-mono

# ========================================================================================
# Cleanup
# ========================================================================================

echo "Cleaning up after ourselves..."
brew cleanup

echo "Verifying that everything is okay..."
brew doctor

echo "Done."
